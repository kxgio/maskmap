<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>口罩即時查</title>
    <link rel="stylesheet" href="./css/min/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
</head>
<body>
    <div id="mask">
        <header>
            <img src="./img/logo.png" alt="">
            <h1>口罩即時查</h1>
        </header>

        <nav></nav>

        <article>

            <section class="searchBlock">
                <div class="searchInput">
                    <input type="text" placeholder="請輸入想查詢位置" id="search" v-model='searchCity'>
                    <img src="./img/ic_location.png">
                </div>
            </section>

            <section class='info'>
                <div class="dateInfo">
                    <span class='date'>{{vDate[iDate]}}</span>
                <span>購買日</span>
                    <img src="./img/ic_help@2x.png" alt="">
                </div>

                <div class="detail" v-if='vShowMask.length'>
                    <div class="note">
                        <p>距離方圓<span>5公里</span>以內的供應商</p>
                        <p>資訊更新時間<span>{{sUpdateTime}}</span></p>
                    </div>
                    <div class="reLoading" @click='getMaskData()'>
                        <span>重整列表</span>
                    </div>
                </div>
                <div></div>
            </section>

            <section class="maskData" v-if='vShowMask.length'>
                <div class="pharmacy" v-for='(maskInfo, idx) in vShowMask' v-if='idx < dataNumberNow'>
                    <div class="maskNumber">
                        <div class="maskStyle" :class='vMaskClass[getMaskStockIdx(maskInfo.properties.mask_adult)]'>
                            <div>成人口罩數量</div>
                            <div><span>{{maskInfo.properties.mask_adult}}</span>片</div>
                            <img :src="vMaskImg[getMaskStockIdx(maskInfo.properties.mask_adult)]">
                        </div>
                        <div class="maskStyle" :class='vMaskClass[getMaskStockIdx(maskInfo.properties.mask_child)]'>
                            <div>兒童口罩數量</div>
                            <div><span>{{maskInfo.properties.mask_child}}</span>片</div>
                            <img :src="vMaskImg[getMaskStockIdx(maskInfo.properties.mask_child)]">
                        </div>                       
                    </div>

                    <div class="pharmacyInfo">
                        <div class="name" :class='vOpenClass[maskInfo.properties.iAvailable]'>
                            <span>{{maskInfo.properties.name}}</span>
                            <span>1.2 km</span>
                            <span>{{vOPenStr[maskInfo.properties.iAvailable]}}</span>
                        </div>
                        <div class='detailStyle'>
                            <span>地址</span>
                            <span class="wrap">{{maskInfo.properties.address}}</span>
                            <span class='bottomLine'>於地圖查看</span>
                        </div>
                        <div class='detailStyle'>
                            <span>電話</span>
                            <span>{{maskInfo.properties.phone}}</span>
                            <span class='bottomLine'>撥打電話</span>
                        </div>
                        <div v-if='maskInfo.properties.note' class='detailStyle'>
                            <span>備註</span>
                            <span class="wrap">{{maskInfo.properties.note}}</span>
                        </div>
                        <div v-if='maskInfo.properties.custom_note' class='detailStyle'>
                            <span>公告</span>
                            <span class="wrap">{{maskInfo.properties.custom_note}}</span class="wrap"></span>>
                        </div>
                    </div>
 
                </div>
            </section>

            <section v-else>
                Loading....
            </section>

            <section class='btnBlock' v-if='vShowMask.length > dataNumberNow'>
                <div class="more" @click='getMoreData()'>
                    <p>尚有{{vShowMask.length - dataNumberNow}}筆</p>
                    <div class='btn01'>查看更多</div>
                </div>
                <a class='btn01 top' href='#mask'>TOP</a>
            </section>

            <section class="tips">
                <ul>
                    <li>部分藥局因採發放號碼牌方式，方便民眾購買口罩，<span class='noteImpor'>系統目前無法顯示已發送號碼牌數量</span>。</li>
                    <li>口罩數量以藥局實際存量為主，<span class='noteImpor'>線上查詢之數量僅供參考</span>。</li>
                    <li>若您的藥局有需要加註的公告事項，可以填寫<a href='https://pse.is/KH7DC'>表單</a></li>
                </ul>
            </section>
        </article>

        <footer>
            <div>防疫專線 1922 ｜ 口罩資訊 1911</div>
            <div class="author">wenyo / PY Design</div>
        </footer>

    </div>
    <script src="./all.js"></script>
</body>
</html>